# Mindmap Upstream Test Coverage (Mermaid@11.12.2)

This document tracks which upstream Mermaid mindmap parser tests are covered in `merman` via:

- snapshot fixtures under `fixtures/mindmap/*.mmd` (goldens generated by `cargo run -p xtask -- update-snapshots`)
- Rust unit tests under `crates/merman-core/src/diagrams/mindmap.rs`
- upstream SVG baselines under `fixtures/upstream-svgs/mindmap/*.svg` (generated by `cargo run -p xtask -- gen-upstream-svgs --diagram mindmap`)
- SVG DOM compare via `cargo run -p xtask -- compare-mindmap-svgs --check-dom --dom-mode parity --dom-decimals 3`

Scope: Mermaid tag `@11.12.2`.

## `mindmap.spec.ts`

Source: `repo-ref/mermaid/packages/mermaid/src/diagrams/mindmap/mindmap.spec.ts`

### Hierarchy

- MMP-1 simple root: fixture `fixtures/mindmap/upstream_simple_root.mmd`
- MMP-2 hierarchical mindmap: fixture `fixtures/mindmap/upstream_hierarchy_nodes.mmd`
- MMP-3 shaped root without id: fixture `fixtures/mindmap/upstream_shaped_root_without_id.mmd`
- MMP-4 deeper hierarchy: fixture `fixtures/mindmap/upstream_hierarchy_nodes.mmd`
- MMP-5 multiple roots are illegal: unit test `mindmap_multiple_roots_is_error` in `crates/merman-core/src/diagrams/mindmap.rs`
- MMP-6 real root in wrong place: unit test `mindmap_real_root_in_wrong_place_is_error` in `crates/merman-core/src/diagrams/mindmap.rs`

### Nodes

- MMP-7 id + label + rect type: fixture `fixtures/mindmap/upstream_hierarchy_nodes.mmd`
- MMP-8 child id + rounded-rect type: fixture `fixtures/mindmap/upstream_hierarchy_nodes.mmd`
- MMP-9 root without indent + child with indent: fixture `fixtures/mindmap/upstream_hierarchy_nodes.mmd`
- MMP-10/11/12/12-a additional node types (circle/cloud/bang/hexagon):
  - `fixtures/mindmap/upstream_root_type_circle.mmd`
  - `fixtures/mindmap/upstream_root_type_cloud.mmd`
  - `fixtures/mindmap/upstream_root_type_bang.mmd`
  - `fixtures/mindmap/upstream_root_type_hexagon.mmd`

### Decorations

- MMP-13 `::icon(...)`: fixture `fixtures/mindmap/upstream_decorations_and_descriptions.mmd`
- MMP-14 `:::class ...`: fixture `fixtures/mindmap/upstream_decorations_and_descriptions.mmd`
- MMP-15/16 icon + classes (both orders): fixture `fixtures/mindmap/upstream_decorations_and_descriptions.mmd`

### Descriptions and syntax in descriptions

- MMP-17 quoted description can contain delimiters: fixture `fixtures/mindmap/upstream_decorations_and_descriptions.mmd`
- MMP-18 quoted description in child: fixture `fixtures/mindmap/upstream_decorations_and_descriptions.mmd`
- MMP-19 child after class assignment attaches to last node: fixture `fixtures/mindmap/upstream_decorations_and_descriptions.mmd`

### Whitespace and comments

- MMP-20 meaningless empty rows: fixture `fixtures/mindmap/upstream_whitespace_and_comments.mmd`
- MMP-21 full-line comments inside diagram: fixture `fixtures/mindmap/upstream_whitespace_and_comments.mmd`
- MMP-22 end-of-line comments: fixture `fixtures/mindmap/upstream_whitespace_and_comments.mmd`
- MMP-23 rows with only spaces do not interfere: fixture `fixtures/mindmap/upstream_whitespace_and_comments.mmd`
- MMP-24/25 rows above the declaration are ignored: fixture `fixtures/mindmap/upstream_whitespace_and_comments.mmd`

## Docs-derived parser+render fixture

Source: `repo-ref/mermaid/docs/syntax/mindmap.md`

- full docs example (includes `::icon(...)` + `<br/>` inside a label):
  `fixtures/mindmap/upstream_docs_example_icons_br.mmd`
- unclear indentation fallback (node `C` attaches to nearest valid ancestor):
  `fixtures/mindmap/upstream_docs_unclear_indentation.mmd`
- single-node shape variants (used to validate root viewport + label bbox rules):
  - `fixtures/mindmap/upstream_docs_mindmap_square_007.mmd`
  - `fixtures/mindmap/upstream_docs_mindmap_rounded_square_009.mmd`
  - `fixtures/mindmap/upstream_docs_mindmap_circle_011.mmd`
  - `fixtures/mindmap/upstream_docs_mindmap_bang_013.mmd`
  - `fixtures/mindmap/upstream_docs_mindmap_cloud_015.mmd`
  - `fixtures/mindmap/upstream_docs_mindmap_hexagon_017.mmd`
  - `fixtures/mindmap/upstream_docs_mindmap_default_019.mmd`
- syntax example:
  `fixtures/mindmap/upstream_docs_mindmap_syntax_005.mmd`
- icons example:
  `fixtures/mindmap/upstream_docs_mindmap_icons_021.mmd`
- classes example:
  `fixtures/mindmap/upstream_docs_mindmap_classes_023.mmd`
- markdown strings example:
  `fixtures/mindmap/upstream_docs_mindmap_markdown_strings_028.mmd`

## Config docs-derived mindmap fixtures

Source: `repo-ref/mermaid/packages/mermaid/src/docs/config/tidy-tree.md`

- tidy-tree layout example (minimal):
  `fixtures/mindmap/upstream_docs_tidy_tree_example_usage_001.mmd`
- tidy-tree layout example (nested + icons + `<br/>`):
  `fixtures/mindmap/upstream_docs_tidy_tree_example_usage_002.mmd`

## Cypress rendering fixtures

Source: `repo-ref/mermaid/cypress/integration/rendering/mindmap.spec.ts`

These fixtures are parity-gated against upstream SVG baselines (DOM parity, root viewport mode):

- `fixtures/mindmap/upstream_cypress_mindmap_spec_example_001.mmd`
- `fixtures/mindmap/upstream_cypress_mindmap_spec_a_root_with_a_shape_002.mmd`
- `fixtures/mindmap/upstream_cypress_mindmap_spec_a_root_with_wrapping_text_and_a_shape_003.mmd`
- `fixtures/mindmap/upstream_cypress_mindmap_spec_a_root_with_wrapping_text_and_long_words_that_exceed_width_004.mmd`
- `fixtures/mindmap/upstream_cypress_mindmap_spec_a_root_with_an_icon_005.mmd`
- `fixtures/mindmap/upstream_cypress_mindmap_spec_blang_and_cloud_shape_006.mmd`
- `fixtures/mindmap/upstream_cypress_mindmap_spec_blang_and_cloud_shape_with_icons_007.mmd`
- `fixtures/mindmap/upstream_cypress_mindmap_spec_braches_008.mmd`
- `fixtures/mindmap/upstream_cypress_mindmap_spec_braches_with_shapes_and_labels_009.mmd`
- `fixtures/mindmap/upstream_cypress_mindmap_spec_text_should_wrap_with_icon_010.mmd`
- `fixtures/mindmap/upstream_cypress_mindmap_spec_square_shape_011.mmd`
- `fixtures/mindmap/upstream_cypress_mindmap_spec_rounded_rect_shape_012.mmd`
- `fixtures/mindmap/upstream_cypress_mindmap_spec_circle_shape_013.mmd`
- `fixtures/mindmap/upstream_cypress_mindmap_spec_default_shape_014.mmd`
- `fixtures/mindmap/upstream_cypress_mindmap_spec_adding_children_015.mmd`
- `fixtures/mindmap/upstream_cypress_mindmap_spec_adding_grand_children_016.mmd`
- `fixtures/mindmap/upstream_cypress_mindmap_spec_formatted_label_with_linebreak_and_a_wrapping_label_and_emojis_017.mmd`
- `fixtures/mindmap/upstream_cypress_mindmap_spec_has_a_label_with_char_sequence_graph_018.mmd`

## HTML demo fixtures

Source: `repo-ref/mermaid/demos/mindmap.html` (via `<pre class="mermaid">` blocks).

- `fixtures/mindmap/upstream_html_demos_mindmap_mindmap_diagram_demo_001.mmd`
- `fixtures/mindmap/upstream_html_demos_mindmap_mindmap_with_root_wrapping_text_and_a_shape_002.mmd`

## Authored stress fixtures

These fixtures are authored in-repo to exercise layout/label edge cases and are parity-gated against
upstream SVG baselines under `fixtures/upstream-svgs/mindmap/`:

- `fixtures/mindmap/stress_mindmap_html_sanitization_013.mmd`
- `fixtures/mindmap/stress_mindmap_markdown_emphasis_icons_014.mmd`
- `fixtures/mindmap/stress_mindmap_many_siblings_decorators_015.mmd`
- `fixtures/mindmap/stress_mindmap_long_words_wrapping_016.mmd`
- `fixtures/mindmap/stress_mindmap_deep_mixed_shapes_017.mmd`
- `fixtures/mindmap/stress_mindmap_whitespace_comments_indent_018.mmd`
- `fixtures/mindmap/stress_mindmap_delimiters_and_quotes_019.mmd`
- `fixtures/mindmap/stress_mindmap_unicode_punct_020.mmd`
- `fixtures/mindmap/stress_mindmap_multiline_markdown_021.mmd`
- `fixtures/mindmap/stress_mindmap_proto_like_ids_022.mmd`
- `fixtures/mindmap/stress_mindmap_icon_class_order_023.mmd`
- `fixtures/mindmap/stress_mindmap_wide_tree_mixed_labels_024.mmd`
- `fixtures/mindmap/stress_mindmap_icons_multi_packs_025.mmd`
- `fixtures/mindmap/stress_mindmap_classes_children_attach_026.mmd`
- `fixtures/mindmap/stress_mindmap_unclear_indent_with_decorators_027.mmd`
- `fixtures/mindmap/stress_mindmap_shapes_with_ids_and_labels_028.mmd`
- `fixtures/mindmap/stress_mindmap_unicode_rtl_mixed_029.mmd`
- `fixtures/mindmap/stress_mindmap_markdown_vs_verbatim_030.mmd`
- `fixtures/mindmap/stress_mindmap_br_variants_031.mmd`
- `fixtures/mindmap/stress_mindmap_trailing_spaces_and_comments_032.mmd`
- `fixtures/mindmap/stress_mindmap_proto_constructor_ids_033.mmd`
- `fixtures/mindmap/stress_mindmap_html_sanitization_links_034.mmd`
- `fixtures/mindmap/stress_mindmap_many_siblings_icons_classes_035.mmd`
- `fixtures/mindmap/stress_mindmap_deep_chain_long_words_036.mmd`
