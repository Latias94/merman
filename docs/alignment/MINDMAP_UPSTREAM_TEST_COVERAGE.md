# Mindmap Upstream Test Coverage (Mermaid@11.12.2)

This document tracks which upstream Mermaid mindmap parser tests are covered in `merman` via:

- snapshot fixtures under `fixtures/mindmap/*.mmd` (goldens generated by `cargo run -p xtask -- update-snapshots`)
- Rust unit tests under `crates/merman-core/src/diagrams/mindmap.rs`
- upstream SVG baselines under `fixtures/upstream-svgs/mindmap/*.svg` (generated by `cargo run -p xtask -- gen-upstream-svgs --diagram mindmap`)
- SVG DOM compare via `cargo run -p xtask -- compare-mindmap-svgs --check-dom --dom-mode parity --dom-decimals 3`

Scope: Mermaid tag `@11.12.2`.

## `mindmap.spec.ts`

Source: `repo-ref/mermaid/packages/mermaid/src/diagrams/mindmap/mindmap.spec.ts`

### Hierarchy

- MMP-1 simple root: fixture `fixtures/mindmap/upstream_simple_root.mmd`
- MMP-2 hierarchical mindmap: fixture `fixtures/mindmap/upstream_hierarchy_nodes.mmd`
- MMP-3 shaped root without id: fixture `fixtures/mindmap/upstream_shaped_root_without_id.mmd`
- MMP-4 deeper hierarchy: fixture `fixtures/mindmap/upstream_hierarchy_nodes.mmd`
- MMP-5 multiple roots are illegal: unit test `mindmap_multiple_roots_is_error` in `crates/merman-core/src/diagrams/mindmap.rs`
- MMP-6 real root in wrong place: unit test `mindmap_real_root_in_wrong_place_is_error` in `crates/merman-core/src/diagrams/mindmap.rs`

### Nodes

- MMP-7 id + label + rect type: fixture `fixtures/mindmap/upstream_hierarchy_nodes.mmd`
- MMP-8 child id + rounded-rect type: fixture `fixtures/mindmap/upstream_hierarchy_nodes.mmd`
- MMP-9 root without indent + child with indent: fixture `fixtures/mindmap/upstream_hierarchy_nodes.mmd`
- MMP-10/11/12/12-a additional node types (circle/cloud/bang/hexagon):
  - `fixtures/mindmap/upstream_root_type_circle.mmd`
  - `fixtures/mindmap/upstream_root_type_cloud.mmd`
  - `fixtures/mindmap/upstream_root_type_bang.mmd`
  - `fixtures/mindmap/upstream_root_type_hexagon.mmd`

### Decorations

- MMP-13 `::icon(...)`: fixture `fixtures/mindmap/upstream_decorations_and_descriptions.mmd`
- MMP-14 `:::class ...`: fixture `fixtures/mindmap/upstream_decorations_and_descriptions.mmd`
- MMP-15/16 icon + classes (both orders): fixture `fixtures/mindmap/upstream_decorations_and_descriptions.mmd`

### Descriptions and syntax in descriptions

- MMP-17 quoted description can contain delimiters: fixture `fixtures/mindmap/upstream_decorations_and_descriptions.mmd`
- MMP-18 quoted description in child: fixture `fixtures/mindmap/upstream_decorations_and_descriptions.mmd`
- MMP-19 child after class assignment attaches to last node: fixture `fixtures/mindmap/upstream_decorations_and_descriptions.mmd`

### Whitespace and comments

- MMP-20 meaningless empty rows: fixture `fixtures/mindmap/upstream_whitespace_and_comments.mmd`
- MMP-21 full-line comments inside diagram: fixture `fixtures/mindmap/upstream_whitespace_and_comments.mmd`
- MMP-22 end-of-line comments: fixture `fixtures/mindmap/upstream_whitespace_and_comments.mmd`
- MMP-23 rows with only spaces do not interfere: fixture `fixtures/mindmap/upstream_whitespace_and_comments.mmd`
- MMP-24/25 rows above the declaration are ignored: fixture `fixtures/mindmap/upstream_whitespace_and_comments.mmd`

## Docs-derived parser+render fixture

Source: `repo-ref/mermaid/docs/syntax/mindmap.md`

- full docs example (includes `::icon(...)` + `<br/>` inside a label):
  `fixtures/mindmap/upstream_docs_example_icons_br.mmd`
- unclear indentation fallback (node `C` attaches to nearest valid ancestor):
  `fixtures/mindmap/upstream_docs_unclear_indentation.mmd`
- single-node shape variants (used to validate root viewport + label bbox rules):
  - `fixtures/mindmap/upstream_docs_mindmap_square_007.mmd`
  - `fixtures/mindmap/upstream_docs_mindmap_rounded_square_009.mmd`
  - `fixtures/mindmap/upstream_docs_mindmap_circle_011.mmd`
  - `fixtures/mindmap/upstream_docs_mindmap_bang_013.mmd`
  - `fixtures/mindmap/upstream_docs_mindmap_cloud_015.mmd`
  - `fixtures/mindmap/upstream_docs_mindmap_hexagon_017.mmd`
  - `fixtures/mindmap/upstream_docs_mindmap_default_019.mmd`
- syntax example:
  `fixtures/mindmap/upstream_docs_mindmap_syntax_005.mmd`
- icons example:
  `fixtures/mindmap/upstream_docs_mindmap_icons_021.mmd`
- classes example:
  `fixtures/mindmap/upstream_docs_mindmap_classes_023.mmd`
- markdown strings example:
  `fixtures/mindmap/upstream_docs_mindmap_markdown_strings_028.mmd`

## Config docs-derived mindmap fixtures

Source: `repo-ref/mermaid/packages/mermaid/src/docs/config/tidy-tree.md`

- tidy-tree layout example (minimal):
  `fixtures/mindmap/upstream_docs_tidy_tree_example_usage_001.mmd`
- tidy-tree layout example (nested + icons + `<br/>`):
  `fixtures/mindmap/upstream_docs_tidy_tree_example_usage_002.mmd`
