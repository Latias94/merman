# C4 Upstream Test Coverage (Mermaid@11.12.2)

This document tracks which upstream Mermaid C4 parser tests are covered in `merman` via:

- snapshot fixtures under `fixtures/c4/*.mmd` (goldens generated by `cargo run -p xtask -- update-snapshots`)
- Rust unit tests under `crates/merman-core/src/diagrams/c4.rs`

Scope: Mermaid tag `@11.12.2`.

## `parser/c4Diagram.spec.js`

Source: `repo-ref/mermaid/packages/mermaid/src/diagrams/c4/parser/c4Diagram.spec.js`

- trailing whitespace after statements: unit test `c4_trailing_whitespace_after_statements_is_accepted` in `crates/merman-core/src/diagrams/c4.rs`
- parameter names that are keywords: `fixtures/c4/upstream_c4Diagram_spec.mmd`
- allow `default` in parameters: `fixtures/c4/upstream_c4Diagram_spec.mmd`

## `parser/c4Person.spec.js`

Source: `repo-ref/mermaid/packages/mermaid/src/diagrams/c4/parser/c4Person.spec.js`

- parse one `Person(...)`: `fixtures/c4/upstream_person_spec.mmd`
- alias / label / description: `fixtures/c4/upstream_person_spec.mmd`
- sprite / link / tags via kv-objects in the label slot: `fixtures/c4/upstream_person_spec.mmd`

## `parser/c4PersonExt.spec.js`

Source: `repo-ref/mermaid/packages/mermaid/src/diagrams/c4/parser/c4PersonExt.spec.js`

- parse one `Person_Ext(...)`: `fixtures/c4/upstream_person_ext_spec.mmd`
- alias / label / description: `fixtures/c4/upstream_person_ext_spec.mmd`
- sprite / link / tags via kv-objects in the label slot: `fixtures/c4/upstream_person_ext_spec.mmd`

## `parser/c4System.spec.js`

Source: `repo-ref/mermaid/packages/mermaid/src/diagrams/c4/parser/c4System.spec.js`

- system macros and `typeC4Shape` mapping:
  - `System`, `SystemDb`, `SystemQueue`
  - `System_Ext`, `SystemDb_Ext`, `SystemQueue_Ext`
  - `fixtures/c4/upstream_system_spec.mmd`
- alias / label / description: `fixtures/c4/upstream_system_spec.mmd`
- sprite / link / tags via kv-objects in the label slot: `fixtures/c4/upstream_system_spec.mmd`

## `parser/c4Container.spec.js`

Source: `repo-ref/mermaid/packages/mermaid/src/diagrams/c4/parser/c4Container.spec.js`

- container macros and `typeC4Shape` mapping:
  - `Container`, `ContainerDb`, `ContainerQueue`
  - `Container_Ext`, `ContainerDb_Ext`, `ContainerQueue_Ext`
  - `fixtures/c4/upstream_container_spec.mmd`
- alias / label / technology / description: `fixtures/c4/upstream_container_spec.mmd`
- sprite / link / tags via kv-objects in the label slot: `fixtures/c4/upstream_container_spec.mmd`

## `parser/c4Boundary.spec.js`

Source: `repo-ref/mermaid/packages/mermaid/src/diagrams/c4/parser/c4Boundary.spec.js`

- parse `Boundary(...) { ... }` and nested parent boundary assignment: `fixtures/c4/upstream_boundary_spec.mmd`
- alias / label / type: `fixtures/c4/upstream_boundary_spec.mmd`
- link / tags via kv-objects in the label slot: `fixtures/c4/upstream_boundary_spec.mmd`

