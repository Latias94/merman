# Treemap Upstream Test Coverage (Mermaid@11.12.2)

This document tracks which upstream Mermaid Treemap behaviors are covered in `merman` via:

- snapshot fixtures under `fixtures/treemap/*.mmd` (goldens generated by `cargo run -p xtask -- update-snapshots`)
- Rust unit tests under `crates/merman-core/src/diagrams/treemap.rs`
- upstream SVG baselines under `fixtures/upstream-svgs/treemap/*.svg` (generated by `cargo run -p xtask -- gen-upstream-svgs --diagram treemap`)
- treemap SVG parity compare via `cargo run -p xtask -- compare-treemap-svgs --check-dom --dom-mode parity --dom-decimals 3` (skips fixtures containing `_parser_only_`)

Scope: Mermaid tag `@11.12.2`.

Source: `repo-ref/mermaid/packages/mermaid/src/diagrams/treemap/utils.test.ts`

- buildHierarchy (basic tree): `fixtures/treemap/upstream_treemap_build_hierarchy_utils_test.mmd`
- buildHierarchy (only root nodes): `fixtures/treemap/upstream_treemap_only_root_nodes_utils_test.mmd`
- buildHierarchy (complex nesting levels): `fixtures/treemap/upstream_treemap_complex_nesting_utils_test.mmd`

Source: `repo-ref/mermaid/packages/mermaid/src/diagrams/treemap/db.ts`

- addClass splitting + cssCompiledStyles projection (parser-only fixture, upstream CLI renders an error diagram): `fixtures/treemap/upstream_treemap_classdef_and_css_compiled_styles_db_parser_only_.mmd`

Docs-derived fixtures (rendered via official Mermaid CLI, version-pinned):

Source: `repo-ref/mermaid/packages/mermaid/src/docs/syntax/treemap.md`

- basic treemap: `fixtures/treemap/upstream_treemap_docs_basic_spec.mmd`
- hierarchical treemap: `fixtures/treemap/upstream_treemap_docs_hierarchical_spec.mmd`
- styling (`classDef` + `:::class`): `fixtures/treemap/upstream_treemap_docs_styling_spec.mmd`
- config `treemap.diagramPadding`: `fixtures/treemap/upstream_treemap_docs_diagram_padding_spec.mmd`
- theme `forest`: `fixtures/treemap/upstream_treemap_docs_theme_forest_spec.mmd`
- config `treemap.valueFormat` (currency): `fixtures/treemap/upstream_treemap_docs_value_format_currency_spec.mmd`
