# Sequence Upstream Test Coverage (Mermaid@11.12.2)

This document tracks which upstream Mermaid `sequenceDiagram` tests are covered in `merman` via:

- snapshot fixtures under `fixtures/sequence/*.mmd` (goldens generated by `cargo run -p xtask -- update-snapshots`)
- Rust unit tests under `crates/merman-core/src/lib.rs`

Scope: Mermaid tag `@11.12.2`.

## `sequenceDiagram.spec.js`

Source: `repo-ref/mermaid/packages/mermaid/src/diagrams/sequence/sequenceDiagram.spec.js`

### Parsing / DB-level behavior

- basic definition: `fixtures/sequence/basic.mmd`
- title + accessibility (`title:`, `accTitle:`, `accDescr:`, `accDescr{...}`):
  - `fixtures/sequence/title_and_accdescr_multiline.mmd`
  - `fixtures/sequence/upstream_title_without_colon_spec.mmd`
  - `fixtures/sequence/upstream_accessibility_single_line_spec.mmd`
- `-` / `=` in actor ids: `fixtures/sequence/actor_ids_dashes_and_equals.mmd`
- participant / actor aliasing:
  - `fixtures/sequence/upstream_alias_participants_spec.mmd`
  - `fixtures/sequence/upstream_alias_mixed_actor_participant_spec.mmd`
- repeated participant declarations dedupe actors: `fixtures/sequence/upstream_duplicate_participants_single_actor_spec.mmd`
- signal type variants: `fixtures/sequence/arrows_variants.mmd`
- activation:
  - `activate` / `deactivate`: `fixtures/sequence/activation_explicit.mmd`
  - inline `+` / `-` activation syntax + stacked activations: `fixtures/sequence/activation_stacked.mmd`
  - deactivate inactive participant must fail: unit test `parse_diagram_sequence_deactivate_inactive_participant_fails_like_upstream` in `crates/merman-core/src/lib.rs`
- comments and blank lines: `fixtures/sequence/comments_and_blank_lines.mmd`
- leading indentation on statements: `fixtures/sequence/upstream_leading_spaces_spec.mmd`
- semicolon statement separators: `fixtures/sequence/semicolons_and_comments.mmd`
- special characters truncated by `;` and `#`: `fixtures/sequence/special_characters.mmd`
- no-label `loop` / `opt` / `alt` / `par`: `fixtures/sequence/no_label_blocks.mmd`
- indented block statements (`loop` + `end`): `fixtures/sequence/upstream_indented_loop_block_spec.mmd`
- `rect` blocks (including nested):
  - `fixtures/sequence/upstream_rect_block_spec.mmd`
  - `fixtures/sequence/upstream_nested_rect_blocks_spec.mmd`
- alt with multiple `else` branches: `fixtures/sequence/upstream_alt_multiple_elses_spec.mmd`
- `critical` blocks (with/without `option`): 
  - `fixtures/sequence/upstream_critical_without_options_spec.mmd`
  - `fixtures/sequence/upstream_critical_with_options_spec.mmd`
- `break` blocks: `fixtures/sequence/upstream_break_spec.mmd`
- `par` with multiple `and` branches: `fixtures/sequence/upstream_par_multiple_ands_spec.mmd`
- `par_over` blocks: `fixtures/sequence/upstream_par_over_spec.mmd`
- `<br>` variants + `wrap:` / `nowrap:` prefixes: `fixtures/sequence/html_br_variants_and_wrap.mmd`
- wrap directive `%%{wrap}%%`: `fixtures/sequence/wrap_directive_default.mmd`
- init directive `%%{init: { config: ... } }%%` sets `sequence.wrap`: `fixtures/sequence/upstream_sequence_init_config_wrap_spec.mmd`
- note placement forms: `fixtures/sequence/notes_placements.mmd`
- boxes: `fixtures/sequence/box_variants.mmd`
- create / destroy:
  - create: `fixtures/sequence/create_simple.mmd`
  - destroy: `fixtures/sequence/destroy_simple.mmd`
  - create + destroy same actor id: `fixtures/sequence/create_destroy_same_actor.mmd`
- links / properties / details: `fixtures/sequence/links_and_properties.mmd`
- trailing colon message content: `fixtures/sequence/trailing_colon_empty_message.mmd`
- extended participant syntax / `type` override:
  - type parsing: `fixtures/sequence/participant_types.mmd`
  - extended syntax quote styles + whitespace: `fixtures/sequence/upstream_extended_participant_quote_styles_spec.mmd`
  - mixed implicit/explicit participants with extended syntax + activation: `fixtures/sequence/upstream_extended_participant_mixed_types_spec.mmd`
  - mixed types and invalid configs: unit tests under `crates/merman-core/src/lib.rs`
- `autonumber` statements: `fixtures/sequence/autonumber_variants.mmd`

### Rendering-only / deferred (not part of headless parsing parity)

- `showSequenceNumbers()` depends on `renderer.draw(...)` side effects in upstream tests.
- bounds calculation, APA rendering, actor mirror behavior, and `svgDraw` unit tests.

## Docs-derived parser+render fixtures

Source: `repo-ref/mermaid/docs/syntax/sequenceDiagram.md`

- basic example arrows (`->>`, `-->>`, `-)`): `fixtures/sequence/upstream_docs_sequence_basic_example.mmd`
- explicit participants and order: `fixtures/sequence/upstream_docs_sequence_participants_order.mmd`
- explicit `actor` statements: `fixtures/sequence/upstream_docs_sequence_actors_basic.mmd`
- `as` aliases: `fixtures/sequence/upstream_docs_sequence_aliases_basic.mmd`
- create/destroy example (participants + actors): `fixtures/sequence/upstream_docs_sequence_create_destroy_example.mmd`
- boxes/grouping: `fixtures/sequence/upstream_docs_sequence_box_groups_example.mmd`
- `<br/>` in message + note: `fixtures/sequence/upstream_docs_sequence_note_with_br.mmd`
- `<br/>` in participant label: `fixtures/sequence/upstream_docs_sequence_actor_label_with_br.mmd`
- `loop` example: `fixtures/sequence/upstream_docs_sequence_loop_every_minute.mmd`
- `alt` + `opt` example: `fixtures/sequence/upstream_docs_sequence_alt_and_opt_example.mmd`
- nested `rect` blocks + mixed whitespace: `fixtures/sequence/upstream_docs_sequence_rect_nested_example.mmd`
- entity code escaping (`#9829;`, `#infin;`): `fixtures/sequence/upstream_docs_sequence_entity_codes_example.mmd`
- `autonumber` full example: `fixtures/sequence/upstream_docs_sequence_autonumber_example.mmd`
