# Sequence Upstream Test Coverage (Mermaid@11.12.2)

This document tracks which upstream Mermaid `sequenceDiagram` tests are covered in `merman` via:

- snapshot fixtures under `fixtures/sequence/*.mmd` (goldens generated by `cargo run -p xtask -- update-snapshots`)
- Rust unit tests under `crates/merman-core/src/lib.rs`

Scope: Mermaid tag `@11.12.2`.

## `sequenceDiagram.spec.js`

Source: `repo-ref/mermaid/packages/mermaid/src/diagrams/sequence/sequenceDiagram.spec.js`

### Parsing / DB-level behavior

- basic definition: `fixtures/sequence/basic.mmd`
- title + accessibility (`title:`, `accTitle:`, `accDescr{...}`): `fixtures/sequence/title_and_accdescr_multiline.mmd`
- `-` / `=` in actor ids: `fixtures/sequence/actor_ids_dashes_and_equals.mmd`
- signal type variants: `fixtures/sequence/arrows_variants.mmd`
- activation:
  - `activate` / `deactivate`: `fixtures/sequence/activation_explicit.mmd`
  - inline `+` / `-` activation syntax + stacked activations: `fixtures/sequence/activation_stacked.mmd`
  - deactivate inactive participant must fail: unit test `parse_diagram_sequence_deactivate_inactive_participant_fails_like_upstream` in `crates/merman-core/src/lib.rs`
- comments and blank lines: `fixtures/sequence/comments_and_blank_lines.mmd`
- semicolon statement separators: `fixtures/sequence/semicolons_and_comments.mmd`
- special characters truncated by `;` and `#`: `fixtures/sequence/special_characters.mmd`
- no-label `loop` / `opt` / `alt` / `par`: `fixtures/sequence/no_label_blocks.mmd`
- alt with multiple `else` branches: `fixtures/sequence/upstream_alt_multiple_elses_spec.mmd`
- `critical` blocks (with/without `option`): 
  - `fixtures/sequence/upstream_critical_without_options_spec.mmd`
  - `fixtures/sequence/upstream_critical_with_options_spec.mmd`
- `break` blocks: `fixtures/sequence/upstream_break_spec.mmd`
- `par` with multiple `and` branches: `fixtures/sequence/upstream_par_multiple_ands_spec.mmd`
- `par_over` blocks: `fixtures/sequence/upstream_par_over_spec.mmd`
- `<br>` variants + `wrap:` / `nowrap:` prefixes: `fixtures/sequence/html_br_variants_and_wrap.mmd`
- wrap directive `%%{wrap}%%`: `fixtures/sequence/wrap_directive_default.mmd`
- note placement forms: `fixtures/sequence/notes_placements.mmd`
- boxes: `fixtures/sequence/box_variants.mmd`
- create / destroy:
  - create: `fixtures/sequence/create_simple.mmd`
  - destroy: `fixtures/sequence/destroy_simple.mmd`
  - create + destroy same actor id: `fixtures/sequence/create_destroy_same_actor.mmd`
- links / properties / details: `fixtures/sequence/links_and_properties.mmd`
- trailing colon message content: `fixtures/sequence/trailing_colon_empty_message.mmd`
- extended participant syntax / `type` override:
  - type parsing: `fixtures/sequence/participant_types.mmd`
  - mixed types and invalid configs: unit tests under `crates/merman-core/src/lib.rs`
- `autonumber` statements: `fixtures/sequence/autonumber_variants.mmd`

### Rendering-only / deferred (not part of headless parsing parity)

- `showSequenceNumbers()` depends on `renderer.draw(...)` side effects in upstream tests.
- bounds calculation, APA rendering, actor mirror behavior, and `svgDraw` unit tests.
