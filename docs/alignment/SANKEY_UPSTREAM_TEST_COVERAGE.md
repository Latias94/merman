# Sankey Upstream Test Coverage (Mermaid@11.12.2)

This document tracks which upstream Mermaid Sankey parser tests are covered in `merman` via:

- snapshot fixtures under `fixtures/sankey/*.mmd` (goldens generated by `cargo run -p xtask -- update-snapshots`)
- Rust unit tests under `crates/merman-core/src/diagrams/sankey.rs`

Scope: Mermaid tag `@11.12.2`.

Source: `repo-ref/mermaid/packages/mermaid/src/diagrams/sankey/parser/sankey.spec.ts`

- parses `energy.csv` with `sankey-beta`: `fixtures/sankey/upstream_sankey_beta_energy_csv_spec.mmd`
- parses csv with `sankey` header: `fixtures/sankey/upstream_sankey_header_energy_csv_spec.mmd`
- allows `__proto__` as id (parser-only; upstream renderer errors on cycles): `fixtures/sankey/upstream_sankey_allows_proto_id_parser_only_spec.mmd`

Upstream SVG baselines:

- `fixtures/upstream-svgs/sankey/upstream_sankey_beta_energy_csv_spec.svg`
- `fixtures/upstream-svgs/sankey/upstream_sankey_header_energy_csv_spec.svg`

Compare report:

- `cargo run -p xtask -- compare-sankey-svgs --check-dom --dom-mode parity --dom-decimals 3`
