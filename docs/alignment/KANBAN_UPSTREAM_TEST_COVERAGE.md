# Kanban Upstream Test Coverage (Mermaid@11.12.2)

This document tracks which upstream Mermaid kanban parser tests are covered in `merman` via:

- snapshot fixtures under `fixtures/kanban/*.mmd` (goldens generated by `cargo run -p xtask -- update-snapshots`)
- Rust unit tests under `crates/merman-core/src/diagrams/kanban.rs`

Scope: Mermaid tag `@11.12.2`.

## `kanban.spec.ts`

Source: `repo-ref/mermaid/packages/mermaid/src/diagrams/kanban/kanban.spec.ts`

### Hierarchy

- KNBN-1 simple root definition: `fixtures/kanban/upstream_hierarchy_simple_root.mmd`
- KNBN-2 hierarchical kanban definition: `fixtures/kanban/upstream_hierarchy_children.mmd`
- KNBN-3 shaped root without explicit id: `fixtures/kanban/upstream_shaped_root_without_id.mmd`
- KNBN-4 deeper hierarchy does not create deeper levels (flattened under section): `fixtures/kanban/upstream_deeper_hierarchy_flattened.mmd`
- KNBN-5 multiple sections are ok: `fixtures/kanban/upstream_multiple_sections.mmd`
- KNBN-6 “real root in wrong place” error: unit test `kanban_real_root_in_wrong_place_is_error` in `crates/merman-core/src/diagrams/kanban.rs`

### Nodes

- KNBN-7 `root[The root]`: `fixtures/kanban/upstream_node_id_and_label.mmd`
- KNBN-8 child id via `theId(child1)`: `fixtures/kanban/upstream_node_id_and_paren_child.mmd`
- KNBN-9 root without indent + child with indent: `fixtures/kanban/upstream_root_no_indent_child_with_indent.mmd`

### Decorations

- KNBN-13 `::icon(...)`: `fixtures/kanban/upstream_decorations_icon_classes.mmd`
- KNBN-14 `:::class list`: `fixtures/kanban/upstream_decorations_icon_classes.mmd`
- KNBN-15/16 icon + classes (both orders): `fixtures/kanban/upstream_decorations_icon_classes.mmd`

### Descriptions and escaping

- KNBN-17 quoted label can contain delimiters: `fixtures/kanban/upstream_descriptions_with_delimiters.mmd`
- KNBN-18 quoted label in child: `fixtures/kanban/upstream_descriptions_with_delimiters.mmd`

### Class assignment and post-decoration children

- KNBN-19 child after class assignment attaches to last node: `fixtures/kanban/upstream_child_after_class_assignment.mmd`

### Whitespace and comments

- KNBN-20 meaningless empty rows: `fixtures/kanban/upstream_whitespace_and_comments.mmd`
- KNBN-21 full-line comments: `fixtures/kanban/upstream_whitespace_and_comments.mmd`
- KNBN-22 end-of-line comments: `fixtures/kanban/upstream_whitespace_and_comments.mmd`
- KNBN-23 rows with only spaces: `fixtures/kanban/upstream_whitespace_and_comments.mmd`
- KNBN-24/25 rows above declaration are ignored: `fixtures/kanban/upstream_whitespace_and_comments.mmd`

### Item metadata (`@{ ... }`)

- KNBN-30..37 metadata keys (`priority`, `assigned`, `icon`, multi-line and single-line blocks, `label`, `ticket`):
  - `fixtures/kanban/upstream_metadata_variants.mmd`

## Upstream Syntax Docs

Source: `repo-ref/mermaid/docs/syntax/kanban.md`

- Full-featured example from the official docs (includes `ticketBaseUrl`, ticket links, and wrapped titles):
  - `fixtures/kanban/upstream_docs_kanban_full_example_012.mmd`

## Upstream Samples (non-docs)

Source: `repo-ref/mermaid/packages/mermaid/src/diagrams/kanban/samples.md`

- Imported sample fixtures (SVG baseline enabled):
  - `fixtures/kanban/upstream_docs_samples_example_001.mmd`
  - `fixtures/kanban/upstream_docs_samples_example_002.mmd`
  - `fixtures/kanban/upstream_docs_samples_example_003.mmd`
  - `fixtures/kanban/upstream_docs_samples_example_004.mmd`
  - `fixtures/kanban/upstream_docs_samples_example_005.mmd`

Deferred:

- `upstream_docs_samples_example_006` was skipped because Mermaid CLI fails to render the YAML frontmatter
  in that example (YAMLException in Puppeteer evaluation). Keep it as a dedicated follow-up parity item.
