# Journey Upstream Test Coverage (Mermaid@11.12.2)

This document tracks which upstream Mermaid journey parser and DB tests are covered in `merman` via:

- snapshot fixtures under `fixtures/journey/*.mmd` (goldens generated by `cargo run -p xtask -- update-snapshots`)
- Rust unit tests under `crates/merman-core/src/diagrams/journey.rs`

Scope: Mermaid tag `@11.12.2`.

## `parser/journey.spec.js`

Source: `repo-ref/mermaid/packages/mermaid/src/diagrams/user-journey/parser/journey.spec.js`

- title definition: `fixtures/journey/upstream_title.mmd`
- accessibility description (`accDescr:` single-line): `fixtures/journey/upstream_accdescr_single_line.mmd`
- accessibility multiline description (`accDescr { ... }`) + title + `accTitle:` + section: `fixtures/journey/upstream_accdescr_block_title_acctitle_section.mmd`
- accessibility title without description: `fixtures/journey/upstream_acctitle_only.mmd`
- section definition: `fixtures/journey/upstream_section_only.mmd`
- multiline section titles with `<br>` variants: `fixtures/journey/upstream_section_br_variants.mmd`
- task definitions (score + people parsing, including empty people list and `5:` -> `[""]`): `fixtures/journey/upstream_tasks_and_people.mmd`

## `journeyDb.spec.js`

Source: `repo-ref/mermaid/packages/mermaid/src/diagrams/user-journey/journeyDb.spec.js`

- tasks and actors should be added; actors are unique+sorted: `fixtures/journey/upstream_db_tasks_and_actors.mmd`

## Syntax docs

Source: `repo-ref/mermaid/docs/syntax/userJourney.md`

- basic example ("My working day"): `fixtures/journey/upstream_docs_userjourney_user_journey_diagram_002.mmd`

## Cypress rendering specs

Source: `repo-ref/mermaid/cypress/integration/rendering/journey.spec.js`

These fixtures are extracted from Cypress browser rendering specs (`renderGraph`) and are
parity-gated against upstream SVG baselines:

- Imported fixtures: `fixtures/journey/upstream_cypress_*.mmd` (9 fixtures)
- Import tool: `cargo run -p xtask -- import-upstream-cypress --diagram journey --with-baselines --complex`
- Baselines: `fixtures/upstream-svgs/journey/upstream_cypress_*.svg`
- SVG DOM compare: `cargo run --release -p xtask -- compare-journey-svgs --check-dom --dom-mode parity-root --dom-decimals 3`
