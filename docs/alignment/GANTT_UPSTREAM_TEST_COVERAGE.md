# Gantt Upstream Test Coverage (Mermaid@11.12.2)

This document tracks which upstream Mermaid gantt tests are covered in `merman` via:

- snapshot fixtures under `fixtures/gantt/*.mmd` (goldens generated by `cargo run -p xtask -- update-snapshots`)
- Rust unit tests under `crates/merman-core/src/diagrams/gantt.rs`

Scope: Mermaid tag `@11.12.2`.

## `parser/gantt.spec.js`

Source: `repo-ref/mermaid/packages/mermaid/src/diagrams/gantt/parser/gantt.spec.js`

- dateFormat definition: covered by `fixtures/gantt/basic.mmd`
- inclusive end dates definition: `fixtures/gantt/inclusive_end_dates.mmd`
- title definition (incl. leading `;` / `#`): `fixtures/gantt/title_leading_semicolon.mmd`, `fixtures/gantt/title_and_section_leading_punct.mmd`
- excludes definition (`excludes weekdays ...`): `fixtures/gantt/excludes_weekdays_keyword.mmd`
- todayMarker definition: `fixtures/gantt/today_marker_and_axis.mmd`
- section definition (incl. leading `;` / `#`): `fixtures/gantt/title_and_section_leading_punct.mmd`
- multiline section titles with `<br>` variants: `fixtures/gantt/multiline_section_title_br_tags.mmd`
- task definition (incl. leading `;` / `#` task lines): `fixtures/gantt/leading_hash_semi_task_lines.mmd`
- relative start/end (`after` / `until` mix): `fixtures/gantt/relative_end_mixed.mmd`
- task tags matrix: `fixtures/gantt/task_tags_combinations.mmd`
- click callback with no args: `fixtures/gantt/click_callback_no_args_loose.mmd`
- click callback with args: `fixtures/gantt/click_callback_args_parsing.mmd`
- accessibility accTitle/accDescr: `fixtures/gantt/acc_title_and_descr.mmd`
- accessibility multiline accDescr block: `fixtures/gantt/acc_descr_block_multiline.mmd`
- weekday allowed values: `fixtures/gantt/weekday_*.mmd`
- allow link to `__proto__` / `constructor`: `fixtures/gantt/click_proto_ids_loose.mmd`

## `ganttDb.spec.ts`

Source: `repo-ref/mermaid/packages/mermaid/src/diagrams/gantt/ganttDb.spec.ts`

- duration parsing (`parseDuration`): unit tests in `crates/merman-core/src/diagrams/gantt.rs`
- clear() API behavior: not applicable to the headless parser API (DB-only test)
- fixed dates / duration variants:
  - with id: `fixtures/gantt/duration_units.mmd`
  - without id: `fixtures/gantt/task_data_variants_no_id.mmd`, `fixtures/gantt/duration_without_id_fixed_start.mmd`
- after/prev/explicit id variants:
  - explicit id (`id2,after id1,1d`): `fixtures/gantt/after_with_explicit_id.mmd`
  - missing id fallback to today midnight: unit test `gantt_after_missing_id_defaults_to_today_midnight_like_upstream`
- milliseconds (`dateFormat x`): `fixtures/gantt/dateformat_x_milliseconds.mmd`
- relative refs across sections:
  - `after`: `fixtures/gantt/relative_refs_across_sections.mmd`
  - `until`: `fixtures/gantt/relative_until_refs_across_sections.mmd`
- multi-id refs:
  - `after id2 id3 id4`: `fixtures/gantt/after_multiple_ids.mmd`
  - `until id2 id3 id4`: `fixtures/gantt/until_multiple_ids.mmd`
- ignore weekends complex case: `fixtures/gantt/ignore_weekends_complex.mmd`
- ignore weekends starting on friday: `fixtures/gantt/weekend_friday.mmd`
- maintain task creation order: unit test `gantt_parse_duration_matches_upstream_examples` and snapshots like `fixtures/gantt/task_order_and_tags.mmd`
- end date on the 31st: `fixtures/gantt/end_date_31st.mmd`
- daylight savings (25 hour day): upstream test is `describe.skipIf(TZ != 'America/Los_Angeles')`; not portable as a snapshot
- inclusive end dates: `fixtures/gantt/inclusive_end_dates.mmd`
- reject ridiculous years: unit test `gantt_rejects_ridiculous_years`
- seconds-only `dateFormat ss`: unit test `gantt_seconds_only_date_format_is_accepted` (snapshot-unstable; see `docs/alignment/GANTT_MINIMUM.md`)
- year typo fallback: `fixtures/gantt/js_fallback_year_typo.mmd`
