// This file is generated by `xtask gen-mindmap-text-overrides`.
//
// Mermaid baseline: 11.12.2
// Source: fixtures/upstream-svgs/mindmap/*.svg

#[allow(dead_code)]
fn font_size_key(font_size: f64) -> u16 {
    if !(font_size.is_finite() && font_size > 0.0) {
        return 0;
    }
    let k = (font_size * 100.0).round();
    if !(k.is_finite() && k >= 0.0 && k <= (u16::MAX as f64)) {
        return 0;
    }
    k as u16
}

static HTML_WIDTH_OVERRIDES_PX: &[(u16, &str, f64)] = &[
    (1600, "A", 9.4375),
    (1600, "B", 9.0625),
    (1600, "Child", 36.515625),
    (1600, "New Stuff", 70.28125),
    (1600, "Node1", 44.828125),
    (1600, "Node2", 44.828125),
    (1600, "Root", 32.1875),
    (1600, "String containing ()", 137.625),
    (1600, "String containing []", 137.625),
    (1600, "The root", 61.3125),
    (1600, "a", 8.40625),
    (1600, "b", 8.921875),
    (1600, "child1", 43.25),
    (1600, "child2", 43.25),
    (1600, "leaf1", 36.15625),
    (1600, "root", 29.734375),
    (1600, "the root", 58.375),
];

pub fn lookup_html_width_px(font_size: f64, text: &str) -> Option<f64> {
    let fs = font_size_key(font_size);
    if fs == 0 || text.is_empty() {
        return None;
    }
    let mut lo = 0usize;
    let mut hi = HTML_WIDTH_OVERRIDES_PX.len();
    while lo < hi {
        let mid = (lo + hi) / 2;
        let (k_fs, k_text, w) = HTML_WIDTH_OVERRIDES_PX[mid];
        match k_fs.cmp(&fs) {
            std::cmp::Ordering::Equal => match k_text.cmp(text) {
                std::cmp::Ordering::Equal => return Some(w),
                std::cmp::Ordering::Less => lo = mid + 1,
                std::cmp::Ordering::Greater => hi = mid,
            },
            std::cmp::Ordering::Less => lo = mid + 1,
            std::cmp::Ordering::Greater => hi = mid,
        }
    }
    None
}
